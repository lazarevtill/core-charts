# Centralized Authorization List
# This ConfigMap is shared across all applications for SSO authentication
# Only users in this list can access: ArgoCD, Grafana, MinIO, Kafka UI, Prometheus
#
# To add a new user:
# 1. Add email to the 'users' field (comma-separated)
# 2. Add email to 'users-regex' field (escaped for regex)
# 3. Add email to 'users-list' field (YAML list format)
# 4. Apply: kubectl apply -f k8s/shared-config/authorized-users.yaml
# 5. Restart affected pods to pick up changes

apiVersion: v1
kind: ConfigMap
metadata:
  name: authorized-users
  namespace: infrastructure
  labels:
    app: authorization
    shared: "true"
data:
  # Comma-separated list of authorized email addresses
  users: "dcversus@gmail.com"

  # For regex matching (used by Kafka UI and other apps)
  users-regex: "^dcversus@gmail\\.com$"

  # YAML list format (for apps that need array format)
  users-list: |
    - dcversus@gmail.com
