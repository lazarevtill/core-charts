{{- if .Values.kafkaUI.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: kafka-ui-config
  namespace: {{ .Release.Namespace }}
data:
  # Kafka cluster connection
  KAFKA_CLUSTERS_0_NAME: {{ .Values.kafkaUI.kafka.clusterName | quote }}
  KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS: {{ .Values.kafkaUI.kafka.bootstrapServers | quote }}

  # OAuth2 Configuration for Google SSO
  # Note: clientId and clientSecret are loaded from Secret (not ConfigMap)
  AUTH_TYPE: "OAUTH2"
  AUTH_OAUTH2_CLIENT_GOOGLE_PROVIDER: "google"
  AUTH_OAUTH2_CLIENT_GOOGLE_SCOPE: {{ .Values.kafkaUI.oauth2.scope | quote }}
  AUTH_OAUTH2_CLIENT_GOOGLE_REDIRECTURI: {{ .Values.kafkaUI.oauth2.redirectUri | quote }}
  AUTH_OAUTH2_CLIENT_GOOGLE_ALLOWEDEMAILPATTERN: {{ .Values.kafkaUI.oauth2.allowedEmailPattern | quote }}

  # Ensure proper header forwarding behind nginx ingress
  SERVER_FORWARDHEADERSSTRATEGY: "native"
{{- end }}
