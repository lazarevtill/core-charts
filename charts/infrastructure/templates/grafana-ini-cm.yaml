{{- if .Values.grafana.externalLinks.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-config
  namespace: monitoring
  labels:
    app: grafana
data:
  grafana.ini: |
    [paths]
    data = /var/lib/grafana
    logs = /var/log/grafana
    plugins = /var/lib/grafana/plugins
    provisioning = /etc/grafana/provisioning

    [server]
    protocol = http
    http_port = 3000
    domain = grafana.theedgestory.org
    root_url = https://grafana.theedgestory.org

    [auth.proxy]
    enabled = true
    header_name = X-Auth-Request-Email
    header_property = email
    auto_sign_up = true

    [users]
    auto_assign_org_role = Admin

    # External links in navigation (top menu)
    [navigation.app_sections]
    [external_link]
    enabled = true

    [[external_links]]
    name = "ğŸ  The Edge Story"
    url = "https://theedgestory.org"
    target = "_blank"

    [[external_links]]
    name = "ğŸš€ ArgoCD"
    url = "https://argo.theedgestory.org"
    target = "_blank"

    [[external_links]]
    name = "ğŸ“ˆ Prometheus"
    url = "https://prometheus.theedgestory.org"
    target = "_blank"

    [[external_links]]
    name = "ğŸ“¨ Kafka UI"
    url = "https://kafka.theedgestory.org"
    target = "_blank"

    [[external_links]]
    name = "ğŸ’¾ MinIO Console"
    url = "https://s3-admin.theedgestory.org"
    target = "_blank"

    [[external_links]]
    name = "ğŸ”§ Dev Pipeline"
    url = "https://core-pipeline.dev.theedgestory.org/api-docs"
    target = "_blank"

    [[external_links]]
    name = "âœ¨ Prod Pipeline"
    url = "https://core-pipeline.theedgestory.org/api-docs"
    target = "_blank"
{{- end }}
