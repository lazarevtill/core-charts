# PostgreSQL configuration with automatic database and user creation
postgresql:
  # Use Bitnami Legacy registry (after Aug 2025 migration)
  # Specific version tags moved to bitnamilegacy registry
  image:
    registry: docker.io
    repository: bitnamilegacy/postgresql
    tag: "16.4.0-debian-12-r13"

  auth:
    # Password will be auto-generated if not set
    postgresPassword: ""
    database: "postgres"
    # Enable automatic password generation
    existingSecret: ""

  primary:
    persistence:
      enabled: false

    resources:
      requests:
        memory: "256Mi"
        cpu: "250m"
      limits:
        memory: "512Mi"
        cpu: "500m"

  # Disable volume permissions init container
  volumePermissions:
    enabled: false

  # Disable metrics exporter
  metrics:
    enabled: false

  # Disable shmVolume (requires volume)
  shmVolume:
    enabled: false

# List of additional databases to create
# Passwords will be auto-generated if not provided
databases:
  - name: core_pipeline_dev
    user: core_user
    # Password will be generated automatically
  - name: core_pipeline_prod
    user: core_user
    # Password will be generated automatically