# Ingress NGINX configuration for production environment

controller:
  service:
    type: LoadBalancer
    annotations:
      # Cloud provider specific annotations
      # AWS:
      # service.beta.kubernetes.io/aws-load-balancer-type: "nlb"
      # GCP:
      # cloud.google.com/load-balancer-type: "External"
      # Hetzner:
      # load-balancer.hetzner.cloud/location: "fsn1"

  replicaCount: 2  # High availability

  metrics:
    enabled: true
    serviceMonitor:
      enabled: true

  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi

  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

  admissionWebhooks:
    enabled: true

  config:
    use-forwarded-headers: "true"
    compute-full-forwarded-for: "true"
    proxy-body-size: "100m"
    proxy-buffer-size: "16k"
